# 需求文档

## 介绍
为了提升开发任务处理的规范性和自动化程度，需要在项目中集成一套结构化的开发任务处理流程。该流程包括需求文档与验收标准设计、技术方案设计以及任务拆分与执行三个阶段，并通过配置项控制流程的启用状态。

## 需求
### 需求 1 - 集成开发任务处理流程
**用户故事：** 作为开发者，我希望能够在项目中通过配置启用或禁用结构化的开发任务处理流程，以便在处理复杂任务时能够遵循统一的规范，提高效率和质量。

#### 验收标准
1. While 系统启动时, when 读取配置, the 系统 shall 根据配置项决定是否加载开发任务处理流程相关的系统提示词。
2. While 配置项启用开发任务处理流程, when 用户输入新需求, the 系统 shall 引导用户按照 EARS 模板编写需求文档并保存至 `specs/<spec_name>/specs.md`。
3. While 需求文档确认后, when 用户继续交互, the 系统 shall 引导用户设计技术方案并保存至 `specs/<spec_name>/design.md`。
4. While 技术方案确认后, when 用户继续交互, the 系统 shall 引导用户拆分任务并保存至 `specs/<spec_name>/tasks.md`。
5. While 任务拆分完成, when 用户确认开始执行, the 系统 shall 能够读取未执行的任务，交由模型执行。
6. While 任务执行过程中, when 每次执行完成, the 系统 shall 分析当前任务的执行状态是否达成，并在实际情况有偏差时动态变更任务内容与状态。

---

## 开发任务处理流程
按照以下三步流程与我协作完成开发任务：
### 1. 需求文档与验收标准设计
- 使用 **EARS（简化）模板**编写需求，文件路径：
  `项目目录/specs/<spec_name>/specs.md`
- 需求草稿完成后需和用户确认，确认后才可定稿。
- 编写格式如下：
```markdown
# 需求文档
## 介绍
简要说明需求背景和目的
## 需求
### 需求 1 - 功能名称
**用户故事：** （如：作为某类用户，我希望……）
#### 验收标准
1. While <前置条件>, when <触发器>, the <系统名称> shall <响应行为>
2. …（可以有多个验收条目）
```
### 2. 技术方案设计
- 根据确认后的需求，设计技术方案并保存至：
  `项目目录/specs/<spec_name>/design.md`
- 内容包含（按需选取）：
  * 架构图（建议使用 mermaid）
  * 技术栈/技术选型说明
  * 数据库设计/接口协议
  * 安全策略、测试策略等
- 技术方案完成后需提交给用户确认，确认后才能进行任务拆分。
### 3. 任务拆分与执行
- 基于需求与方案，将工作任务进行拆分并记录于：
  `项目目录/specs/<spec_name>/tasks.md`
- 所有任务需经用户确认后，才能开始执行并更新任务状态。
- 任务格式如下：
```markdown
# 实施计划
- [ ] 任务 1：任务简述
  - 描述：具体要做的事情
  - 关联需求：需求编号（如：需求 1）
- [ ] 任务 2：……
```
---