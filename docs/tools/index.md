# Gemini CLI 工具

Gemini CLI 包含内置工具，Gemini 模型使用这些工具与你的本地环境交互、访问信息并执行操作。这些工具增强了 CLI 的功能，使其能够超越文本生成，协助完成广泛的任务。

## Gemini CLI 工具概览

在 Gemini CLI 的上下文中，工具是 Gemini 模型可以请求执行的特定功能或模块。例如，如果你要求 Gemini “总结 `my_document.txt` 的内容”，模型可能会识别到需要读取该文件，并请求执行 `read_file` 工具。

核心组件（`packages/core`）管理这些工具，向 Gemini 模型展示它们的定义（模式），在请求时执行工具，并将结果返回给模型以进一步处理为面向用户的响应。

这些工具提供了以下功能：

- **访问本地信息：** 工具允许 Gemini 访访问你的本地文件系统、读取文件内容、列出目录等。
- **执行命令：** 使用如 `run_shell_command` 等工具，Gemini 可以运行 shell 命令（需适当的安全措施和用户确认）。
- **与网络交互：** 工具可以从 URL 获取内容。
- **执行操作：** 工具可以修改文件、写入新文件或在你的系统上执行其他操作（通常带有保护措施）。
- **使响应更可靠：** 通过使用工具获取实时或特定的本地数据，Gemini 的响应可以更加准确、相关，并基于你实际的上下文。

## 如何使用 Gemini CLI 工具

要使用 Gemini CLI 工具，可以向 Gemini CLI 提供一个提示词。其工作流程如下：

1. 你向 Gemini CLI 提供一个提示词。
2. CLI 将提示词发送到核心组件。
3. 核心组件连同你的提示词和对话历史，将可用工具及其描述/模式发送给 Gemini API。
4. Gemini 模型分析你的请求。如果确定需要使用工具，其响应中将包含对执行特定工具及参数的请求。
5. 核心组件接收到该工具请求后进行验证，并（通常在用户确认敏感操作后）执行该工具。
6. 工具的输出被发送回 Gemini 模型。
7. Gemini 模型使用工具的输出来生成最终答案，然后通过核心组件发送回 CLI 并显示给你。

你通常会在 CLI 中看到消息，提示正在调用某个工具以及该工具是否成功或失败。

## 安全与确认

许多工具，尤其是那些能够修改你的文件系统或执行命令的工具（如 `write_file`、`edit`、`run_shell_command`），在设计时就考虑了安全性。Gemini CLI 通常会：

- **需要确认：** 在执行潜在敏感操作之前提示你确认，并显示即将执行的操作。
- **使用沙盒机制：** 所有工具都受到沙盒机制的限制（参见 [Gemini CLI 中的沙盒](../sandbox.md)）。这意味着在沙盒环境中运行时，任何你希望使用的工具（包括 MCP 服务器）都必须位于沙盒环境中。例如，要通过 `npx` 运行 MCP 服务器，则 `npx` 可执行文件必须安装在沙盒的 Docker 镜像中，或在 `sandbox-exec` 环境中可用。

在允许工具继续执行之前，请务必仔细查看确认提示。

## 了解更多关于 Gemini CLI 的工具

Gemini CLI 的内置工具大致可以分为以下几类：

- **[文件系统工具](./file-system.md)：** 用于与文件和目录交互（读取、写入、列出、搜索等）。
- **[Shell 工具](./shell.md) (`run_shell_command`)：** 用于执行 shell 命令。
- **[网络获取工具](./web-fetch.md) (`web_fetch`)：** 用于从 URL 获取内容。
- **[网络搜索工具](./web-search.md) (`web_search`)：** 用于搜索网络。
- **[多文件读取工具](./multi-file.md) (`read_many_files`)：** 用于读取多个文件或目录内容的专用工具，通常由 `@` 命令使用。
- **[记忆工具](./memory.md) (`save_memory`)：** 用于在会话之间保存和回忆信息。

此外，这些工具还集成了：

- **[MCP 服务器](./mcp-server.md)：** MCP 服务器充当 Gemini 模型与你的本地环境或其他服务（如 API）之间的桥梁。
- **[沙盒](../sandbox.md)：** 沙盒将模型及其更改与你的环境隔离，以降低潜在风险。